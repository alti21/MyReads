(this["webpackJsonpmy-reads"]=this["webpackJsonpmy-reads"]||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(19),o=n.n(r),s=(n(25),n(26),n(9)),i=n(3),u=n(6),d=n(1),l=function(e){var t=e.content,n=e.className,c=e.headingLevel,a=e.headingClass,r=c;return Object(d.jsx)("div",{className:n,children:Object(d.jsx)(r,{className:a,children:t})})};l.defaultProps={headingClass:"heading"};var j=l,h=n(7),b=function(e){var t=e.choices,n=e.label,a=e.onSelectChoice,r=e.currentShelf,o=e.choiceName,s=Object(c.useState)(!1),i=Object(u.a)(s,2),l=i[0],j=i[1],b=Object(c.useRef)(),f=function(e){b.current&&b.current.contains(e.target)?j(!0):j(!1)};return Object(c.useEffect)((function(){return document.addEventListener("mousedown",f),function(){document.removeEventListener("mousedown",f)}}),[]),Object(d.jsxs)("div",{className:"dropdown",ref:b,children:[Object(d.jsx)("button",{type:"button",className:"btn",children:Object(d.jsx)(h.b,{})}),Object(d.jsxs)("div",{id:"myDropdown",className:"dropdown-content ".concat(l?"show":"hide"),children:[Object(d.jsx)("div",{className:"dropdown-label",children:n}),t.map((function(e,t){return Object(d.jsxs)("div",{className:"choice-wrapper",children:[Object(d.jsx)("span",{className:"check-mark",children:r===e?"\u2714":""}),Object(d.jsx)("button",{className:"dropdown-choice",onClick:function(){a(e)},type:"button",value:e,children:o[e]})]},t)}))]})]})};b.defaultProps={label:"Move to...",choiceName:{currentlyReading:"Currently Reading",wantToRead:"Want To Read",read:"Read",none:"None"}};var f=b,O=n(11),p="https://reactnd-books-api.udacity.com",m=localStorage.token;m||(m=localStorage.token=Math.random().toString(36).substr(-8));var x={Accept:"application/json",Authorization:m},v=function(e){var t=e.book,n=e.reRender,a=Object(c.useState)("None"),r=Object(u.a)(a,2),o=r[0],s=r[1],i=Object(c.useState)({}),l=Object(u.a)(i,2),j=l[0],h=l[1],b=Object(c.useState)("None"),m=Object(u.a)(b,2),v=m[0],g=m[1];return Object(c.useEffect)((function(){var e=!1;return function(e,t){return fetch("".concat(p,"/books/").concat(e.id),{method:"PUT",headers:Object(O.a)(Object(O.a)({},x),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(j,o).then((function(){var c;(c=t.id,fetch("".concat(p,"/books/").concat(c),{headers:x}).then((function(e){return e.json()})).then((function(e){return e.book}))).then((function(t){e||(g(t.shelf),n())}))})),function(){e=!0}}),[o]),Object(d.jsxs)("div",{className:"book",children:[Object(d.jsx)("img",{src:t.imageLinks.thumbnail,alt:t.title,className:"book-thumbnail"}),Object(d.jsx)(f,{choices:["currentlyReading","wantToRead","read","none"],onSelectChoice:function(e){var n;n=t,s(e),h(n)},shelf:o,currentShelf:v,choiceName:{currentlyReading:"Currently Reading",wantToRead:"Want To Read",read:"Read",none:"None"}}),Object(d.jsx)("div",{className:"book-title",children:t.title}),Object(d.jsx)("div",{className:"book-authors",children:t.authors.map((function(e,t){return Object(d.jsx)("div",{children:e},t)}))})]})},g=function(e){var t=e.data,n=e.shelfType,c=e.reRender,a=function(e){return e};return"none"===n?Object(d.jsx)("div",{className:"book-list",children:t!==[]?t.map((function(e){return Object(d.jsx)(v,{book:e,toggleDropDown:a,reRender:function(){return c()}},e.id)})):null}):Object(d.jsx)("div",{className:"book-list",children:t!==[]?t.map((function(e){return e.shelf===n?Object(d.jsx)(v,{book:e,toggleDropDown:a,reRender:function(){return c()}},e.id):null})):null})};g.defaultProps={shelfType:"none",reRender:function(){}};var y=g,N=function(e){var t=e.data,n=e.shelf,c=e.reRender;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j,{content:n.title,headingClass:"shelf-header",headingLevel:"h2"}),Object(d.jsx)("hr",{}),Object(d.jsx)(y,{data:t,shelfType:n.id,reRender:function(){return c()}})]})},R=function(e){var t=e.children;return Object(d.jsx)("div",{children:Object(d.jsxs)("button",{type:"button",className:"btn addbtn",children:[Object(d.jsx)(h.c,{}),t]})})},k=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),o=Object(u.a)(r,2),i=o[0],l=o[1];return Object(c.useEffect)((function(){var e=!1;return fetch("".concat(p,"/books"),{headers:x}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(t){!e&&t.length>0?a(t):e||a([])})),function(){e=!0}}),[i]),Object(d.jsxs)("div",{children:[Object(d.jsx)(j,{content:"MyReads",className:"App-header",headingLevel:"h1"}),[{title:"Currently Reading",id:"currentlyReading"},{title:"Want To Read",id:"wantToRead"},{title:"Read",id:"read"}].map((function(e){return Object(d.jsx)(N,{data:n,shelf:e,reRender:function(){l(!i)}})})),Object(d.jsx)(s.b,{to:"/MyReads/search",children:Object(d.jsx)(R,{})})]})},S=function(e){var t=e.type,n=e.placeholder,c=e.inputClassName,a=e.iconClassName,r=e.icon,o=e.handleChange,i=e.searchValue;return Object(d.jsxs)("div",{children:[Object(d.jsx)(s.b,{to:"/MyReads",children:Object(d.jsx)("span",{className:a,children:r})}),Object(d.jsx)("input",{type:t,value:i,placeholder:n,className:c,onChange:o})]})};S.defaultProps={placeholder:"Search",inputClassName:"search-bar",iconClassName:"input-arrow",icon:Object(d.jsx)(h.a,{})};var C=S,T=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),o=Object(u.a)(r,2),s=o[0],i=o[1];return Object(c.useEffect)((function(){var e=!1,t=setTimeout((function(){n.length>0&&!e?function(e){return fetch("".concat(p,"/search"),{method:"POST",headers:Object(O.a)(Object(O.a)({},x),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(n).then((function(t){t.length>0&&!e?i(t):e||i([])})):e||i([])}),1e3);return function(){clearTimeout(t),e=!0}}),[n]),Object(d.jsxs)("div",{children:[Object(d.jsx)(C,{type:"text",searchValue:n,placeholder:"Search for a book",icon:Object(d.jsx)(h.a,{}),handleChange:function(e){a(e.target.value)}}),Object(d.jsx)(y,{data:s,shelfType:"none"})]})},w=function(){return Object(d.jsx)(s.a,{children:Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{exact:!0,path:"/MyReads/",component:k}),Object(d.jsx)(i.a,{path:"/MyReads/search",component:T})]})})};var L=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(w,{})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(L,{})}),document.getElementById("root")),M()}},[[33,1,2]]]);
//# sourceMappingURL=main.664d7172.chunk.js.map